$(document).ready(function () {if (document.location.hash) {top.location = CO_URL + document.location.hash.replace('#!/', '');}if ($('body').find('input').html().length > 0) {$('body').find('input:eq(0)').focus();}CO_init();});(function ($) {$.fn.switchClass = (function (remove, add, time) {$(this).fadeOut(time, function () {$(this).removeClass(remove).addClass(add).fadeIn(time);});}); $.fn.req = (function (addr, out) {if ($(out).html().length == 0) {alert('Object [' + out + '] not found');return;} $.ajax({type: (list.length > 0) ? 'POST' : 'GET',url: addr,data: $(this).serialize(),success: function (output) { _gaq.push(['_trackEvent', 'page', addr]); if (out !== 'return') {$(out).html(output);if (list.length == 0) {document.location.hash = '!/' + addr;}window.onhashchange = (function () {if (document.location.hash.replace('#!/', '') != addr) {top.location = document.location.hash.replace('#!/', '');}});if($(out).find('#redirect').length > 0) {top.location = $(out).find('#redirect').html();$(out).find('div#redirect').remove();}if ($(out).find('div#title').length > 0) {document.title = $(out).find('div#title').html();$(out).find('div#title').remove();}}if ($(out).find("#error-show").html().length > 0) {$("#error-display").html($(out).find("#error-show").html());}if ($('input').html().length > 0) {$(out).find('input:eq(0)').focus();}if (loader !== 0) {$(this).find(loader).hide();} CO_init(); if (out == 'return') {return output;} }});});})(jQuery);function CO_init() {if (typeof jQuery == 'undefined') {alert('jQuery not loaded - cannot run application');return;}$("input.error:eq(0)").focus();$("input > div.error").keyup(function () {$(this).removeClass('error');});CO_embed();$(".cb-enable").click(function () {var a = $(this).parents(".switch");$(".cb-disable", a).removeClass("selected");$(this).addClass("selected");$(".checkbox", a).attr("checked", !0)});$(".cb-disable").click(function () {var a = $(this).parents(".switch");$(".cb-enable", a).removeClass("selected");$(this).addClass("selected");$(".checkbox", a).attr("checked", !1)});$.extend({getUrlVars: function () {var vars = [],hash;var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');for (var i = 0; i < hashes.length; i++) {hash = hashes[i].split('=');vars.push(hash[0]);vars[hash[0]] = hash[1];}return vars;},getUrlVar: function (name) {return $.getUrlVars()[name];}});if ($("div.app-notice").html().length > 0 && $("div.app-notice").css("display") == "none") {$("div.app-notice").slideDown().css("cursor", "pointer").click(function () {$(this).html('').slideUp();});} else {$("div.app-notice").remove();}}
function CO_embed() { $("div.captcha-link").hide(); $("div#recaptcha_image, div.captcha-link").mouseenter(function(){ $("div.captcha-link").show(); }).mouseleave(function(){ $("div.captcha-link").hide(); });  $("form.form-login").submit(function () { $(this).req('login' + ($.getUrlVar('return') ? '?return=' + $.getUrlVar('return') : ''), 'div.hp_right'); return false; }); $("[rel=link-login]").click(function(){ $(this).req('login', 'div.body-content'); return false; }); $("form.form-reset").submit(function () { $(this).req('reset_password', 'div.hp_right'); return false; }); $("form.form-reset-update").submit(function () { $(this).req('reset_password/complete?__id__=' + ($.getUrlVar('__id__')), 'div.hp_right'); return false; }); $("[rel=link-reset]").click(function(){ $(this).req('reset_password', 'div.body-content'); return false; }); if($.browser.safari) { $("div#recaptcha_image").css("position", "relative").css("top", "-44px").css("left", "138px"); } }
function facebook_auth() { top.location = CO_URL + 'login/facebook' + ($.getUrlVar('return') ? '?return=' + escape($.getUrlVar('return')) : ''); }

function CO_close(e) {if (!e) e = window.event; if (e.keyCode){ if (e.keyCode == "27") { if($("div.app-notice").length > 0) { $("div.app-notice").slideUp(500).html(''); } else { $("div.l").fadeOut(50); window.location.reload(); } } } } window.onkeyup = CO_close;


/* $("[rel=link-register]").click(function(){ $(this).req('register', 'div.body-content'); return false; });

$("form.form-signup").submit(function () { var h = $('div.hp_right').height(); $("div.hp_right div.loading").css('height', h); $("div.hp_right div.loading div").css('padding-top', (h/2.25)); $("div.hp_right div.loading div").css('top', '80px'); $(this).req('register', 'div.hp_right'); return false; });*/